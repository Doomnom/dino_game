<!DOCTYPE html>
<html>
<head>
    <title>Dino Runner Game</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico"> <!-- Sets the favicon for the webpage -->
    <style>
        canvas {
            border: 1px solid black; /* Adds a black border to the canvas */
            display: block; /* Ensures the canvas is displayed as a block element */
            margin: 0 auto; /* Centers the canvas horizontally */
            max-width: 100vw; /* Limits canvas width to 100% of viewport width */
            max-height: 100vh; /* Limits canvas height to 100% of viewport height */
        }
        #gameOver {
            display: none; /* Hides the game over message by default */
            text-align: center; /* Centers the text horizontally */
            font-family: Arial, sans-serif; /* Sets the font for the game over message */
            font-size: 24px; /* Sets the font size */
            margin-top: 20px; /* Adds space above the message */
            color: black; /* Sets text color to black */
        }
        #scorePanel {
            text-align: center; /* Centers the score panel text */
            font-family: Arial, sans-serif; /* Sets the font */
            margin-top: 10px; /* Adds space above the score panel */
        }
        #submitScore {
            display: none; /* Hides the score submission form by default */
            text-align: center; /* Centers the form text */
            margin-top: 20px; /* Adds space above the form */
        }
        #leaderboard {
            text-align: center; /* Centers the leaderboard text */
            font-family: Arial, sans-serif; /* Sets the font */
            margin-top: 20px; /* Adds space above the leaderboard */
        }
        #errorMessage {
            color: red; /* Sets error message text color to red */
            display: none; /* Hides the error message by default */
            text-align: center; /* Centers the error message */
        }
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.5);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }
        .login-form {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .login-form input {
            display: block;
            margin: 10px auto;
            padding: 5px;
        }
        .login-form button {
            padding: 5px 15px;
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script> <!-- Loads Firebase app compatibility script -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script> <!-- Loads Firebase database compatibility script -->
</head>
<body>
    <div id="login-container" class="login-container">
        <div class="login-form">
            <h2>Login</h2>
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button onclick="login()">Login</button>
            <p id="loginError" style="color: red; display: none;">Invalid credentials</p>
        </div>
    </div>
    <canvas id="gameCanvas"></canvas> <!-- Canvas element for rendering the game -->
    <div id="gameOver">Game Over! Press Space or Tap to Restart</div> <!-- Displays game over message and restart instructions -->
    <div id="scorePanel">
        High Score: <span id="highScore">0</span><br> <!-- Displays the high score -->
        Score: <span id="score">0</span> <!-- Displays the current score -->
    </div>
    <div id="submitScore">
        Enter your name: <input type="text" id="playerName" maxlength="20"> <!-- Input field for player name, limited to 20 characters -->
        <button id="submitScoreButton">Submit Score</button> <!-- Button to submit the score -->
    </div>
    <div id="errorMessage"></div> <!-- Displays error messages if submission fails -->
    <div id="leaderboard">
        <h3>Global Top 5 High Scores</h3> <!-- Heading for the leaderboard -->
        <ul id="highScoresList"></ul> <!-- Unordered list to display top 5 high scores -->
    </div>
    <script>
        let isLoggedIn = false;

        // Declare functions in global scope to ensure accessibility
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            // Simple hardcoded credentials for demo (replace with secure authentication in production)
            if (username === 'player' && password === '1234') {
                isLoggedIn = true;
                document.getElementById('login-container').style.display = 'none';
                document.getElementById('gameCanvas').style.display = 'block';
                document.getElementById('scorePanel').style.display = 'block';
                document.getElementById('submitScore').style.display = 'none'; // Hide submit score until game over
                document.getElementById('leaderboard').style.display = 'block';
                if (typeof loadImages === 'function') {
                    loadImages(); // Start the game after login
                }
                if (typeof loadHighScores === 'function') {
                    loadHighScores();
                }
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Hide game content until login
            document.getElementById('gameCanvas').style.display = 'none';
            document.getElementById('scorePanel').style.display = 'none';
            document.getElementById('submitScore').style.display = 'none';
            document.getElementById('leaderboard').style.display = 'none';

            // Firebase configuration object with API credentials and settings
            const firebaseConfig = {
                apiKey: "AIzaSyAJCkPYWK3mDTsbEw_VDgh30PbY7Z3BhFg",
                authDomain: "dinogame-r3dnax.firebaseapp.com",
                databaseURL: "https://dinogame-r3dnax-default-rtdb.europe-west1.firebasedatabase.app",
                projectId: "dinogame-r3dnax",
                storageBucket: "dinogame-r3dnax.firebasestorage.app",
                messagingSenderId: "401593443465",
                appId: "1:401593443465:web:492e13e480e0488d3d1258",
                measurementId: "G-JS0KZL2BT5"
            };
            firebase.initializeApp(firebaseConfig); // Initializes Firebase with the configuration

            const canvas = document.getElementById('gameCanvas'); // Gets the canvas element
            const ctx = canvas.getContext('2d'); // Gets 2D rendering context for the canvas
            canvas.width = Math.min(800, window.innerWidth * 0.9); // Sets canvas width to 800px or 90% of viewport width
            canvas.height = Math.min(400, window.innerHeight * 0.5); // Sets canvas height to 400px or 50% of viewport height

            const elements = {
                gameOverDiv: document.getElementById('gameOver'), // Reference to the game over div
                scoreDisplay: document.getElementById('score'), // Reference to the score display span
                highScoreDisplay: document.getElementById('highScore'), // Reference to the high score display span
                submitScoreDiv: document.getElementById('submitScore'), // Reference to the score submission div
                playerNameInput: document.getElementById('playerName'), // Reference to the player name input
                submitScoreButton: document.getElementById('submitScoreButton'), // Reference to the submit score button
                errorMessage: document.getElementById('errorMessage'), // Reference to the error message div
                leaderboardDiv: document.getElementById('leaderboard'), // Reference to the leaderboard div
                highScoresList: document.getElementById('highScoresList') // Reference to the high scores list
            };

            const gameState = {
                dino: { x: 50, y: 340 - 60, width: 40, height: 60, vy: 0, gravity: 0.8, jumpPower: -15, isJumping: false, isDucking: false }, // Initial dino state (position, size, velocity, etc.)
                obstacles: [], // Array to store obstacle objects
                score: 0, // Current game score
                highScore: 0, // Highest score achieved
                speed: 5, // Initial game speed
                gameOver: false, // Flag to indicate game over state
                gameStarted: false, // Flag to indicate if the game has started
                frameCount: 0, // Tracks the number of frames for animation timing
                useFallbackShapes: false, // Flag to use fallback shapes if images fail to load
                imagesLoaded: 0, // Counter for loaded images
                totalImages: 0, // Total number of images to load
                loadTimeout: 5000, // Timeout in milliseconds for image loading
                images: {
                    dino_run: [new Image(), new Image(), new Image()], // Array of images for dino running animation
                    dino_jump: new Image(), // Image for dino jumping
                    dino_duck: new Image(), // Image for dino ducking
                    tentacle: [new Image(), new Image()], // Array of images for tentacle animation
                    sawblade: [new Image(), new Image(), new Image()], // Array of images for sawblade animation
                    drone: [new Image(), new Image()] // Array of images for drone animation
                }
            };

            // Image sources and loading
            const imageSources = {
                dino_run: ['https://doomnom.github.io/dino_game/sprites/dino_run1.png', 'https://doomnom.github.io/dino_game/sprites/dino_run2.png', 'https://doomnom.github.io/dino_game/sprites/dino_run3.png'],
                dino_jump: 'https://doomnom.github.io/dino_game/sprites/dino_jump.png',
                dino_duck: 'https://doomnom.github.io/dino_game/sprites/dino_duck.png',
                tentacle: ['https://doomnom.github.io/dino_game/sprites/tentacle1.png', 'https://doomnom.github.io/dino_game/sprites/tentacle2.png'],
                sawblade: ['https://doomnom.github.io/dino_game/sprites/sawblade1.png', 'https://doomnom.github.io/dino_game/sprites/sawblade2.png', 'https://doomnom.github.io/dino_game/sprites/sawblade3.png'],
                drone: ['https://doomnom.github.io/dino_game/sprites/drone1.png', 'https://doomnom.github.io/dino_game/sprites/drone2.png']
            };

            function loadImages() {
                // Loads all game images and sets up event handlers for loading
                for (let [key, src] of Object.entries(imageSources)) {
                    if (Array.isArray(src)) {
                        gameState.totalImages += src.length;
                        src.forEach((url, index) => {
                            gameState.images[key][index].onload = () => handleImageLoad(); // Increments loaded count on successful load
                            gameState.images[key][index].onerror = () => handleImageError(); // Handles image loading errors
                            gameState.images[key][index].src = url; // Sets the image source URL
                        });
                    } else {
                        gameState.totalImages++;
                        gameState.images[key].onload = () => handleImageLoad(); // Increments loaded count on successful load
                        gameState.images[key].onerror = () => handleImageError(); // Handles image loading errors
                        gameState.images[key].src = src; // Sets the image source URL
                    }
                }
                setTimeout(() => {
                    if (gameState.imagesLoaded < gameState.totalImages) {
                        gameState.useFallbackShapes = true; // Switches to fallback shapes if loading times out
                        gameState.imagesLoaded = gameState.totalImages; // Marks all images as loaded
                        gameLoop(); // Starts the game loop
                    }
                }, gameState.loadTimeout);
            }

            function handleImageLoad() {
                // Increments the images loaded counter and starts the game when all are loaded
                gameState.imagesLoaded++;
                if (gameState.imagesLoaded === gameState.totalImages) gameLoop();
            }

            function handleImageError() {
                // Increments the images loaded counter and enables fallback shapes on error
                gameState.imagesLoaded++;
                gameState.useFallbackShapes = true;
                if (gameState.imagesLoaded === gameState.totalImages) gameLoop();
            }

            // Drawing functions
            function drawDino() {
                // Draws the dino based on its state (running, jumping, or ducking)
                if (gameState.useFallbackShapes) {
                    ctx.fillStyle = 'blue';
                    ctx.fillRect(gameState.dino.x, gameState.dino.isDucking ? gameState.dino.y + 20 : gameState.dino.y, gameState.dino.width, gameState.dino.isDucking ? gameState.dino.height / 2 : gameState.dino.height);
                } else if (gameState.dino.isDucking) {
                    ctx.drawImage(gameState.images.dino_duck, gameState.dino.x, gameState.dino.y + 20, gameState.dino.width, gameState.dino.height / 2);
                } else if (gameState.dino.isJumping) {
                    ctx.drawImage(gameState.images.dino_jump, gameState.dino.x, gameState.dino.y, gameState.dino.width, gameState.dino.height);
                } else {
                    const frame = Math.floor(gameState.frameCount / 10) % gameState.images.dino_run.length;
                    ctx.drawImage(gameState.images.dino_run[frame], gameState.dino.x, gameState.dino.y, gameState.dino.width, gameState.dino.height);
                }
            }

            function drawObstacle(obstacle) {
                // Draws an obstacle based on its type (tentacle, sawblade, or drone)
                if (gameState.useFallbackShapes) {
                    ctx.fillStyle = obstacle.type === 'tentacle' ? 'purple' : obstacle.type === 'sawblade' ? 'silver' : 'red';
                    if (obstacle.type === 'sawblade') {
                        ctx.beginPath();
                        ctx.arc(obstacle.x + obstacle.width / 2, obstacle.y + obstacle.height / 2, obstacle.width / 2, 0, Math.PI * 2);
                        ctx.fill();
                    } else if (obstacle.type === 'drone') {
                        ctx.beginPath();
                        ctx.moveTo(obstacle.x, obstacle.y + obstacle.height);
                        ctx.lineTo(obstacle.x + obstacle.width / 2, obstacle.y);
                        ctx.lineTo(obstacle.x + obstacle.width, obstacle.y + obstacle.height);
                        ctx.closePath();
                        ctx.fill();
                    } else {
                        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                    }
                } else {
                    const frame = obstacle.type === 'tentacle' ? Math.floor(gameState.frameCount / 30) % gameState.images.tentacle.length : 
                                  obstacle.type === 'sawblade' ? Math.floor(gameState.frameCount / 10) % gameState.images.sawblade.length : 
                                  Math.floor(gameState.frameCount / 10) % gameState.images.drone.length;
                    const imageArray = gameState.images[obstacle.type];
                    ctx.drawImage(imageArray[frame], obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                }
            }

            function drawGround() {
                // Draws the ground line at y=340
                ctx.fillStyle = 'gray';
                ctx.fillRect(0, 340, canvas.width, 10);
            }

            // Game logic
            function spawnObstacle() {
                // Spawns a new obstacle every 100 frames if spacing allows
                if (gameState.frameCount % 100 === 0) {
                    if (gameState.obstacles.length > 0 && canvas.width - gameState.obstacles[gameState.obstacles.length - 1].x < 200) return;
                    const typeCycle = Math.floor(gameState.frameCount / 100) % 3;
                    const type = typeCycle === 0 ? 'tentacle' : typeCycle === 1 ? 'sawblade' : 'drone';
                    const yPos = 290 + Math.floor(Math.random() * 20);
                    gameState.obstacles.push({ x: canvas.width, y: yPos, width: type === 'tentacle' ? 20 : 30, height: type === 'tentacle' ? 40 : 30, type });
                }
            }

            function updateObstacles() {
                // Updates obstacle positions and removes off-screen obstacles, increasing score
                for (let i = gameState.obstacles.length - 1; i >= 0; i--) {
                    gameState.obstacles[i].x -= gameState.speed;
                    if (gameState.obstacles[i].x + gameState.obstacles[i].width < 0) {
                        gameState.obstacles.splice(i, 1);
                        gameState.score += 10;
                        gameState.highScore = Math.max(gameState.highScore, gameState.score);
                    }
                }
            }

            function checkCollision() {
                // Checks for collision between the dino and any obstacle
                const dinoHeight = gameState.dino.isDucking ? gameState.dino.height / 2 : gameState.dino.height;
                const dinoY = gameState.dino.isDucking ? gameState.dino.y + 20 : gameState.dino.y;
                return gameState.obstacles.some(obstacle =>
                    gameState.dino.x + gameState.dino.width > obstacle.x &&
                    gameState.dino.x < obstacle.x + obstacle.width &&
                    dinoY + dinoHeight > obstacle.y &&
                    dinoY < obstacle.y + obstacle.height
                );
            }

            function updateDino() {
                // Updates the dino's position based on gravity and jumping
                if (gameState.dino.isJumping) {
                    gameState.dino.vy += gameState.dino.gravity;
                    gameState.dino.y += gameState.dino.vy;
                    const groundY = gameState.dino.isDucking ? 340 - gameState.dino.height / 2 : 340 - gameState.dino.height;
                    if (gameState.dino.y > groundY) {
                        gameState.dino.y = groundY;
                        gameState.dino.vy = 0;
                        gameState.dino.isJumping = false;
                    }
                }
            }

            // Input handling
            document.addEventListener('keydown', (event) => {
                // Handles keyboard input for game control
                if (!isLoggedIn) return;
                if (event.code === 'Space' && !gameState.gameOver && !gameState.gameStarted) gameState.gameStarted = true;
                else if (event.code === 'Space' && !gameState.gameOver && gameState.gameStarted && !gameState.dino.isJumping) {
                    gameState.dino.vy = gameState.dino.jumpPower;
                    gameState.dino.isJumping = true;
                    gameState.dino.isDucking = false;
                } else if (event.code === 'ArrowDown' && !gameState.gameOver && !gameState.dino.isJumping && gameState.gameStarted) gameState.dino.isDucking = true;
                else if (event.code === 'Space' && gameState.gameOver) resetGame();
            });

            document.addEventListener('keyup', (event) => {
                // Handles key release to stop ducking
                if (!isLoggedIn) return;
                if (event.code === 'ArrowDown') gameState.dino.isDucking = false;
            });

            document.addEventListener('touchstart', (event) => {
                // Handles touch input for game control
                if (!isLoggedIn) return;
                if (event.target.closest('#submitScore')) return;
                event.preventDefault();
                const touch = event.touches[0];
                const rect = canvas.getBoundingClientRect();
                const touchX = touch.clientX - rect.left;
                const touchY = touch.clientY - rect.top;

                if (touchX >= 0 && touchY >= 0 && touchX <= canvas.width && touchY <= canvas.height &&
                    touchX > canvas.width / 2 && touchY > canvas.height / 2 && !gameState.gameOver && !gameState.dino.isJumping && gameState.gameStarted) {
                    gameState.dino.isDucking = true;
                } else if (!gameState.gameOver && !gameState.gameStarted) gameState.gameStarted = true;
                else if (!gameState.gameOver && gameState.gameStarted && !gameState.dino.isJumping) {
                    gameState.dino.vy = gameState.dino.jumpPower;
                    gameState.dino.isJumping = true;
                    gameState.dino.isDucking = false;
                } else if (gameState.gameOver) resetGame();
            });

            document.addEventListener('touchend', (event) => {
                // Handles touch end to stop ducking
                if (!isLoggedIn) return;
                if (event.target.closest('#submitScore')) return;
                event.preventDefault();
                gameState.dino.isDucking = false;
            });

            // Game management
            function resetGame() {
                // Resets the game state to initial conditions
                if (!isLoggedIn) return;
                gameState.obstacles = [];
                gameState.score = 0;
                gameState.speed = 5;
                gameState.gameOver = false;
                gameState.gameStarted = false;
                gameState.dino.y = 340 - gameState.dino.height;
                gameState.dino.vy = 0;
                gameState.dino.isJumping = false;
                gameState.dino.isDucking = false;
                elements.gameOverDiv.style.display = 'none';
                elements.submitScoreDiv.style.display = 'none';
                elements.errorMessage.style.display = 'none';
                loadHighScores();
            }

            function submitScore() {
                // Submits the high score to Firebase with the player's name
                if (!isLoggedIn) return;
                const name = elements.playerNameInput.value.trim();
                if (!name) {
                    elements.errorMessage.textContent = 'Please enter a name';
                    elements.errorMessage.style.display = 'block';
                    return;
                }
                if (gameState.highScore > 0) {
                    firebase.database().ref('highscores').push({ name, score: gameState.highScore, timestamp: Date.now() })
                        .then(() => {
                            elements.playerNameInput.value = '';
                            elements.submitScoreDiv.style.display = 'none';
                            elements.errorMessage.style.display = 'none';
                            loadHighScores();
                        })
                        .catch(error => {
                            elements.errorMessage.textContent = 'Error submitting score: ' + error.message;
                            elements.errorMessage.style.display = 'block';
                        });
                } else {
                    elements.submitScoreDiv.style.display = 'none';
                }
            }

            elements.submitScoreButton.addEventListener('click', submitScore); // Adds click event listener to submit score button

            function loadHighScores() {
                // Fetches and displays the top 5 high scores from Firebase
                if (!isLoggedIn) return;
                firebase.database().ref('highscores').orderByChild('score').limitToLast(5)
                    .once('value')
                    .then(snapshot => {
                        elements.highScoresList.innerHTML = '';
                        const scores = [];
                        snapshot.forEach(childSnapshot => scores.unshift(childSnapshot.val()));
                        if (scores.length) {
                            scores.forEach(s => {
                                const li = document.createElement('li');
                                li.textContent = `${s.name}: ${s.score}`;
                                elements.highScoresList.appendChild(li);
                            });
                        } else {
                            const li = document.createElement('li');
                            li.textContent = 'No high scores yet.';
                            elements.highScoresList.appendChild(li);
                        }
                    })
                    .catch(error => {
                        console.error('Leaderboard fetch error:', error);
                        const li = document.createElement('li');
                        li.textContent = 'Error loading high scores.';
                        elements.highScoresList.appendChild(li);
                    });
            }

            // Game loop
            function gameLoop() {
                // Main game loop that updates and renders the game
                if (!isLoggedIn) return;
                console.log('Game loop running');
                ctx.clearRect(0, 0, canvas.width, canvas.height); // Clears the canvas

                if (gameState.imagesLoaded < gameState.totalImages) {
                    ctx.fillStyle = 'black';
                    ctx.font = '24px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`Loading... ${Math.round((gameState.imagesLoaded / gameState.totalImages) * 100)}%`, canvas.width / 2, canvas.height / 2); // Displays loading progress
                    requestAnimationFrame(gameLoop);
                    return;
                }

                drawGround(); // Draws the ground
                drawDino(); // Draws the dino

                if (!gameState.gameStarted && !gameState.gameOver) {
                    ctx.fillStyle = 'black';
                    ctx.font = '24px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Press Space or Tap to Start', canvas.width / 2, canvas.height / 2); // Instructions to start
                    ctx.fillText('Hold Bottom-Right to Duck', canvas.width / 2, canvas.height / 2 + 30); // Instructions to duck
                } else if (!gameState.gameOver) {
                    gameState.frameCount++;
                    updateDino(); // Updates dino position
                    spawnObstacle(); // Spawns new obstacles
                    updateObstacles(); // Updates obstacle positions
                    gameState.speed += 0.0005; // Gradually increases game speed
                    if (checkCollision()) {
                        gameState.gameOver = true; // Ends game on collision
                        elements.gameOverDiv.style.display = 'block';
                        elements.submitScoreDiv.style.display = 'block';
                    }
                    gameState.obstacles.forEach(drawObstacle); // Draws all obstacles
                }

                elements.scoreDisplay.textContent = gameState.score; // Updates score display
                elements.highScoreDisplay.textContent = gameState.highScore; // Updates high score display
                requestAnimationFrame(gameLoop); // Requests next animation frame
            }

            // Initial load is handled by login
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95f9077abe90673d',t:'MTc1MjU4MDA5MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95f914574fdc6732',t:'MTc1MjU4MDYxNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95f91a3fae50f999',t:'MTc1MjU4MDg1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>